function recaptchaLoad(n){DetectarNavegadorIE()?$("#CaptchaOriginal").css("display","block"):($("#CaptchaInvisible").html(""),$("#CaptchaInvisible").append('<div class="captcha center"><div class="g-recaptcha" id="recaptcha" data-sitekey="'+n+'" data-callback="validarReCaptchaInvisible" data-size="invisible" data-badge="inline"><\/div><\/div>'))}function validarCaptcha(){var n=$("#CaptchaInputText").val(),t=$("#CaptchaDeText").val();$.ajax({datatype:"json",type:"POST",url:"/seguridad/ValidarCaptcha",data:{InputElementName:n,TokenElementName:t},success:function(n){if(n===!1){$.post("/seguridad/Refresh",{t:$("#CaptchaDeText").val()});var t=$(document).HBModal({header:{label:"Error"},body:"El código ingresado es incorrecto.",buttons:{primaryButton:{enabled:!0,label:"CERRAR",onClickCallBack:function(){},behaviour:"closeModal"}}});t.showModal();$("#CaptchaInputText").val("");$("#CaptchaInputText").parent().removeClass("typed");$("#CaptchaInputText").parent().addClass("focus");$("#btn-submit").addClass("disabled");inputsEfect();inputAutosize()}else submit()},error:function(){var n=$(document).HBModal({header:{label:"Error"},body:"Ocurrió un error al validar el código.",buttons:{primaryButton:{enabled:!0,label:"CERRAR",onClickCallBack:function(){},behaviour:"closeModal"}}});n.showModal()}})}function validarReCaptchaInvisible(){var n=$("#g-recaptcha-response").val();$.ajax({datatype:"json",type:"POST",url:"/gestion/ValidoReCaptcha",data:{captcha:n},success:function(n){IsAjaxError(n)?(dfdRec.reject(),grecaptcha.reset(),showErrorModal("Error","Ocurrio un error en la validacion del ReCaptcha"),OnJsError(n,!1,"Error al validar el recaptcha con Google.")):n?(dfdRec.resolve(),recValidated=!0,$("form").data("securityRunning",!1),submit()):(grecaptcha.reset(),showErrorModal("Error","ReCaptcha incorrecto"),dfdRec.reject())},error:function(n){grecaptcha.reset();showErrorModal("Error","Ocurrio un error en la validacion del ReCaptcha");dfdRec.reject();OnJsError(n,!1,"Error con recaptcha .")}})}function recaptchaCall(){$(document).ready(function(){recaptchaLoad(recaptchaPublicKey,mostrarSubmit);grecaptcha.render("recaptcha")})}function securityValidations(n){n?DetectarNavegadorIE()?validarCaptcha():triggerRecaptcha():validarCaptcha()}function DetectarNavegadorIE(){var n,t;return n=navigator.userAgent.indexOf("MSIE")!==-1?/MSIE (\d+\.\d+);/:/Trident.*rv[ :]*(\d+\.\d+)/,n.test(navigator.userAgent)?(t=RegExp.$1,t>=5):void 0}var dfdRec,recValidated,validarRecaptcha=!1,triggerRecaptcha=function(){return recValidated?dfdRec.resolve():(dfdRec=new $.Deferred,typeof grecaptcha=="undefined"||!isDefined(grecaptcha))?dfdRec.resolve():($("form").data("securityRunning",!0),grecaptcha.execute(),dfdRec.promise())}